# Minutes of IDEM Code Review 2024-01-22

Attendence: Nick Tierney (chair), Gerry Ryan, August Hao, Saras Windecker

- We continue to review Gerry Ryan's [sdmtools](https://github.com/idem-lab/sdmtools) R package, is now migrated to idem-lab address. Gerry had gone through the suggested changes from last session generated from `gp()` call from `goodpractice` package. Gerry has updated the readme page of the repo.
- Goal of todays code review: continue to discuss code review's scope and purpose, and solve a new `sdmtools` installation problem (https://github.com/idem-lab/sdmtools/issues/6).
- `sdmtools` installation problem:
  - `terra` SpatVector objects generated by `usethis::use_data` causes installation failure
  - variable named "r" and "v" have been changed but did not solve this issue.
  - the issue can be circumvented by setting `LazyData` to false
  - further investigation shows the issue is to do with how `terra` interacts with saving R objects, enforcing users to use `terra` specific options for saving
  - we decided to solve the problem by not saving the example objects anymore but instead build functions to recreate them as part of the package
  - Nick T made a commit to document the fix and thus closing issue [#6](https://github.com/idem-lab/sdmtools/issues/6)
- discussion on how to make examples of functions that depend on data as input arguments, is there a better way to put together an example code without data?
  - Saras suggested making a vignette so that it creates data and runs the example with the data, and allows for enough space to explain the details if needed
- discussion on scope of code review
  - we agree to keep code review flexible in its scope, not necessarily a space to review polished codes only, so at times there may be content overlap with hacky hour
  - we can use this time for doing "code walks" to sanity check codes
- reviewed naming convention for default github main/master branch, Nick shared blogpost for renaming: https://www.tidyverse.org/blog/2021/10/renaming-default-branch/
- discussed how `set.seed` interacts with random number generators, `set.seed` sets the seed for the first instance of RNG used, but if the call using the RNG changes then subsequent random numbers would change even with the same initial seed
- discussed options to source all scripts in a directory
  - lapply source across the listed directory
  - R.utils::sourceDirectory('R/')
  - tar_source
- discussed strategies for avoiding long `if else` statements which becomes harder to read: one can compartmentalize the statement into functions, and make more frequent use of `if` followed by `if`
- discussed the benefits of using S3 methods for functions to handle different object classes, rather than building if statements inside the function to check object class
- Saras showed how to change repository main branch name in (https://github.com/idem-lab/GPreff)
